{{ $project := . }}
<article class="case-study-card" itemscope itemtype="https://schema.org/CreativeWork" aria-labelledby="project-{{ .File.UniqueID }}-title">
  <!-- Left: Project Title and Description -->
  <div class="case-study-card__content">
    <div class="case-study-card__text-container">
      <header class="case-study-card__header">
        <a href="{{ .Permalink }}" class="case-study-card__title-link" data-variant="naked" aria-describedby="project-{{ .File.UniqueID }}-description">
          <h3 id="project-{{ .File.UniqueID }}-title" class="case-study-card__title" itemprop="name">{{ .Title }}</h3>
        </a>
      </header>
      <div class="case-study-card__description-wrapper">
        <p id="project-{{ .File.UniqueID }}-description" class="case-study-card__description" itemprop="description">{{ .Description }}</p>
      </div>
    </div>
  </div>
  
  <!-- Right: Visual -->
  <div class="case-study-card__visual">
    <a href="{{ .Permalink }}" class="case-study-card__image-link" aria-describedby="project-{{ .File.UniqueID }}-title">
      {{ $image := "" }}
      {{ $imageAlt := "" }}
      {{ if .Params.blocks }}
        {{ range .Params.blocks }}
          {{ if eq .template "hero" }}
            {{ $image = .image }}
            {{ $imageAlt = .image_alt }}
          {{ end }}
        {{ end }}
      {{ end }}
      
      {{ if $image }}
      <div class="case-study-card__image">
        <img 
          src="{{ $image }}" 
          alt="{{ $imageAlt | default (printf "Screenshot of %s project" $.Title) }}"
          loading="lazy"
          class="case-study-card__img"
          itemprop="image"
        >
      </div>
      {{ else if .Params.image }}
      <div class="case-study-card__image">
        <img 
          src="{{ .Params.image }}" 
          alt="{{ .Params.image_alt | default (printf "Screenshot of %s project" .Title) }}"
          loading="lazy"
          class="case-study-card__img"
          itemprop="image"
        >
      </div>
      {{ else }}
      <div class="case-study-card__placeholder" aria-hidden="true">
        <i class="fas fa-image" aria-hidden="true"></i>
        <span class="sr-only">No image available for {{ .Title }}</span>
      </div>
      {{ end }}
    </a>
  </div>
</article>

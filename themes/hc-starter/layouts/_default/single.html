{{ define "main" }}

<article class="h-entry">
  <header class="Hero region flow">

    <h1 class="p-name">{{ .Title }}</h1>
    <div class="cluster">
      <time class="dt-published" datetime="{{ .Date }}">
        {{ with .PublishDate.Format "Jan 2, 2006" }}
          {{ . }}
        {{ else }}
          {{ .Date.Format "Jan 2 2006" }}
        {{ end }}
      </time>
      {{ if .Params.topics }}
        {{ partial "post/topics.html" . }} 
      {{ end }}
    </div>

    {{ if ne .Section "newsletter" }}
    <div> 
      {{ $published := .Date | time.Format ":date_medium" }}
      {{ $modified := .Lastmod | time.Format ":date_medium" }}
      {{ if ne $published $modified }}
      <span class="Badge"> Updated: {{ $modified }} </span>
      {{ end }}
    </div>
    {{ end }}
  </header>

  <section class="e-content flow">
    {{ if .Params.blocks }}
      {{- range .Params.blocks -}}
          {{- if eq .template "hero" -}}{{ partial "blocks/hero" (dict "Params" . "baseURL" $.Site.Params.cloudinary_url ) }}{{- end -}}
          {{- if eq .template "image-full" -}}{{ partial "blocks/img-full" (dict "Params" . "baseURL" $.Site.Params.cloudinary_url ) }}{{- end -}}
          {{- if eq .template "body-copy" -}}{{ partial "blocks/content" (dict "Params" .) }}{{- end -}}
          {{- if eq .template "image-grid-two" -}}{{ partial "blocks/img-grid-two" (dict "Params" . "baseURL" $.Site.Params.cloudinary_url) }}{{- end -}}
          {{- if eq .template "image-grid-four" -}}{{ partial "blocks/img-grid-four" (dict "Params" . "baseURL" $.Site.Params.cloudinary_url) }}{{- end -}} 
          {{- if eq .template "quote" -}}{{ partial "blocks/quote" (dict "Params" . "baseURL" $.Site.Params.cloudinary_url) }}{{- end -}} 
          {{- if eq .template "link-big" -}}{{ partial "blocks/link-big" (dict "Params" .) }}{{- end -}} 
          {{- if eq .template "iframe-full" -}}{{ partial "blocks/iframe-full" (dict "Params" .) }}{{- end -}} 
          {{- if eq .template "iframe-grid-one" -}}{{ partial "blocks/iframe-grid-one" (dict "Params" .) }}{{- end -}} 
          {{- if eq .template "iframe-grid-two" -}}{{ partial "blocks/iframe-grid-two" (dict "Params" .) }}{{- end -}} 
      {{- end -}}
    {{ else }}
      {{ partial "heading-anchor.html" .Content }} 
    {{ end }}

    {{ $source_title := .Params.source_title }}
    {{ $source_link := .Params.source_link  }}
    {{ $author := .Params.author }}
    {{ if eq .Section "links" }}
      {{ with $source_link }}
      <div>
        <a href="{{ . }}">{{ $source_title }} <span>&#8599;</span></a> {{ with $author }}from {{ . }}{{ end }}. 
      </div>
      {{ end }}
    {{ end }}

    {{ if in .Params.topics "Hugo" }}
      <aside>
        <hr>
        <strong>Interested in learning Hugo?</strong> I'm working on a free course
        over at <a href="https://practicalhugo.com/">practicalhugo.com</a>.
        <hr>
      </aside>
    {{ end }}

  </section>

  {{ partial "reply-by-email.html" (dict "button_text" "Reply by email" ) }}

</article>
<!--/.Content -->
{{ end }}
